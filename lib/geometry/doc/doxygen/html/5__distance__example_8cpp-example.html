<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Geometry Library</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body style="background-image: url(images/draft.png);">

<table cellpadding="2" width="100%">
<tbody>
<tr>
<td valign="top"><img alt="Boost C++ Libraries" src="images/proposed_boost.png" height="86" width="277"></td>
</tr>
</tbody>
</table>
<!-- Generated by Doxygen 1.5.7 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>5_distance_example.cpp</h1>The distance example shows how the distance algorithms can be used for point_xy points, for point_ll points, with our without explicitly specified strategies<p>
<div class="fragment"><pre class="fragment"><span class="comment">// Geometry Library</span>
<span class="comment">//</span>
<span class="comment">// Copyright Barend Gehrels, Geodan Holding B.V. Amsterdam, the Netherlands.</span>
<span class="comment">// Copyright Bruno Lalande 2008</span>
<span class="comment">// Use, modification and distribution is subject to the Boost Software License,</span>
<span class="comment">// Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at</span>
<span class="comment">// http://www.boost.org/LICENSE_1_0.txt)</span>


<span class="comment">/***</span>
<span class="comment"> This sample demonstrates the use of latlong-points, xy-points, calculate distances between</span>
<span class="comment"> latlong points using different formulas,</span>
<span class="comment"> calculate distance between points using pythagoras</span>
<span class="comment"> ***/</span>


<span class="preprocessor">#include &lt;<a class="code" href="point__ll_8hpp.html">geometry/geometries/point_ll.hpp</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="distance_8hpp.html">geometry/algorithms/distance.hpp</a>&gt;</span>
<span class="preprocessor">#include &lt;geometry/io/wkt/streamwkt.hpp&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="length_8hpp.html">geometry/algorithms/length.hpp</a>&gt;</span>

<span class="preprocessor">#ifdef use_projection</span>
<span class="preprocessor"></span><span class="preprocessor">#include &lt;projection/rd.hpp&gt;</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
<span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;iterator&gt;</span>
<span class="preprocessor">#include &lt;vector&gt;</span>
<span class="preprocessor">#include &lt;algorithm&gt;</span>




<span class="keywordtype">int</span> main()
{
        <span class="keyword">using namespace </span>geometry;

        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Construction and conversion</span>
        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="keyword">typedef</span> <a name="_a0"></a><a class="code" href="classgeometry_1_1point__ll.html" title="Point using spherical coordinates lat and lon, on Earth.">point_ll&lt;degree, double&gt;</a> lola;

        lola a;
        <span class="comment">// Amsterdam 52째22'23"N 4째53'32"E</span>
        a.lat(<a name="_a1"></a><a class="code" href="classgeometry_1_1dms.html" title="Utility class to construct latlong points point_ll with degree,minute,second.">dms&lt;north&gt;</a>(52, 22, 23));
        a.lon(<a class="code" href="classgeometry_1_1dms.html" title="Utility class to construct latlong points point_ll with degree,minute,second.">dms&lt;east&gt;</a>(4, 53, 32));

        <span class="comment">// Rotterdam 51째55'51"N 4째28'45"E</span>
        lola r(<a name="_a2"></a><a class="code" href="classgeometry_1_1latitude.html" title="Class to construct point_ll with latitude value (north/south).">latitude&lt;&gt;</a>(<a class="code" href="classgeometry_1_1dms.html" title="Utility class to construct latlong points point_ll with degree,minute,second.">dms&lt;north&gt;</a>(51, 55, 51)),
                <a name="_a3"></a><a class="code" href="classgeometry_1_1longitude.html" title="Class to construct point_ll with longitude value (west/east).">longitude&lt;&gt;</a>(<a class="code" href="classgeometry_1_1dms.html" title="Utility class to construct latlong points point_ll with degree,minute,second.">dms&lt;east&gt;</a>(4, 28, 45)));

        <span class="comment">// The hague: 52째 4' 48" N, 4째 18' 0" E</span>
        lola h(<a class="code" href="classgeometry_1_1longitude.html" title="Class to construct point_ll with longitude value (west/east).">longitude&lt;&gt;</a>(<a class="code" href="classgeometry_1_1dms.html" title="Utility class to construct latlong points point_ll with degree,minute,second.">dms&lt;east&gt;</a>(4, 18, 0)),
                <a class="code" href="classgeometry_1_1latitude.html" title="Class to construct point_ll with latitude value (north/south).">latitude&lt;&gt;</a>(<a class="code" href="classgeometry_1_1dms.html" title="Utility class to construct latlong points point_ll with degree,minute,second.">dms&lt;north&gt;</a>(52, 4, 48)));

        <span class="keyword">typedef</span> <a class="code" href="classgeometry_1_1point__ll.html" title="Point using spherical coordinates lat and lon, on Earth.">point_ll&lt;radian, double&gt;</a> lolar;
        lolar a_rad, r_rad;
        <a name="a4"></a><a class="code" href="namespacegeometry.html#e56c07393e9532e8e7632b5aaa7ac7a8">convert_dr</a>(a, a_rad);
        <a class="code" href="namespacegeometry.html#e56c07393e9532e8e7632b5aaa7ac7a8">convert_dr</a>(r, r_rad);

        <span class="comment">// Define same in Dutch coordinate-system (in meters)</span>
        <span class="keyword">typedef</span> <a name="_a5"></a><a class="code" href="classgeometry_1_1point__xy.html" title="2D point in Cartesian coordinate system">point_xy&lt;double&gt;</a> XY;
<span class="preprocessor">#ifdef use_projection</span>
<span class="preprocessor"></span>        projection::rd&lt;XY, lolar&gt; proj;
        XY a_rd = proj.project(a_rad);
        XY r_rd = proj.project(r_rad);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>        XY a_rd(121267, 487245);
        XY r_rd(92526.2, 438324);
        XY h_rd(80454.2, 455086);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Distances</span>
        <span class="comment">// ------------------------------------------------------------------------------------------</span>

        std::cout &lt;&lt; <span class="stringliteral">"Distance Amsterdam-Rotterdam: "</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"haversine:              "</span> &lt;&lt; 0.001 * <a name="a6"></a><a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a, r) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"haversine rad:          "</span> &lt;&lt; 0.001 * <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a_rad, r_rad) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"haversine other radius: "</span> &lt;&lt; <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a, r, <a name="_a7"></a><a class="code" href="classgeometry_1_1strategy_1_1distance_1_1haversine.html" title="Distance calculation for spherical coordinates on a perfect sphere using haversine...">strategy::distance::haversine&lt;lola&gt;</a>(6371.0) ) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"andoyer:                "</span> &lt;&lt; 0.001 * <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a, r, <a name="_a8"></a><a class="code" href="classgeometry_1_1strategy_1_1distance_1_1andoyer.html" title="Point-point distance approximation taking flattening into account.">strategy::distance::andoyer&lt;lola&gt;</a>() ) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"vincenty:               "</span> &lt;&lt; 0.001 * <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a, r, <a name="_a9"></a><a class="code" href="classgeometry_1_1strategy_1_1distance_1_1vincenty.html" title="Distance calculation formulae on latlong coordinates, after Vincenty, 1975.">strategy::distance::vincenty&lt;lola&gt;</a>() ) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"vincenty rad:           "</span> &lt;&lt; 0.001 * <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a_rad, r_rad, <a class="code" href="classgeometry_1_1strategy_1_1distance_1_1vincenty.html" title="Distance calculation formulae on latlong coordinates, after Vincenty, 1975.">strategy::distance::vincenty&lt;lolar&gt;</a>() ) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"RD, pythagoras:         "</span> &lt;&lt; 0.001 * <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a_rd, r_rd) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;

        std::cout &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"Distance Amsterdam-Den Haag: "</span> &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"haversine:              "</span> &lt;&lt; 0.001 * <a class="code" href="group__distance.html#g72f6dcd3db4803ed3d58d7331e20d376" title="Calculate distance between a point and a linestring (iterator pair).">distance</a>(a, h) &lt;&lt; <span class="stringliteral">" km"</span> &lt;&lt; std::endl;

        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Distances to segments</span>
        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">"The Hague - line Amsterdam,Rotterdam"</span> &lt;&lt; std::endl;

        <a name="_a10"></a><a class="code" href="structgeometry_1_1segment.html" title="Class segment: small containing two (templatized) point references.">segment&lt;const XY&gt;</a> ar_xy(a_rd, r_rd);

        <span class="comment">// Using distance algorithm - not implemented for segments</span>
        <span class="comment">// std::cout &lt;&lt; distance(h_rd, ar_xy) &lt;&lt; std::endl;</span>

        <span class="comment">// Using default strategy for point_xy</span>
        <a name="_a11"></a><a class="code" href="structgeometry_1_1strategy_1_1not__implemented.html" title="Indicate compiler/library user that strategy is not implemented.">strategy_traits&lt;XY&gt;::point_segment_distance</a> calcxy;

        <a name="_a12"></a><a class="code" href="structgeometry_1_1distance__result.html" title="Encapsulate the results of distance calculation.">distance_result</a> dr = calcxy(h_rd, ar_xy);
        std::cout &lt;&lt; <span class="stringliteral">"in RD: "</span> &lt;&lt; 0.001 * dr &lt;&lt; std::endl;

        <span class="comment">// Using default strategy for point_ll</span>
        <a class="code" href="structgeometry_1_1strategy_1_1not__implemented.html" title="Indicate compiler/library user that strategy is not implemented.">strategy_traits&lt;lola&gt;::point_segment_distance</a> calcll;
        dr = calcll(h, <a class="code" href="structgeometry_1_1segment.html" title="Class segment: small containing two (templatized) point references.">segment&lt;const lola&gt;</a>(a, r));
        std::cout &lt;&lt; <span class="stringliteral">"in LL: "</span> &lt;&lt; 0.001 * dr &lt;&lt; std::endl;

        std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">"Rotterdam - line Amsterdam,the Hague"</span> &lt;&lt; std::endl;
        dr = calcxy(r_rd, <a class="code" href="structgeometry_1_1segment.html" title="Class segment: small containing two (templatized) point references.">segment&lt;const XY&gt;</a>(a_rd, h_rd));
        std::cout &lt;&lt; <span class="stringliteral">"in RD: "</span> &lt;&lt; 0.001 * dr &lt;&lt; std::endl;
        dr = calcll(r, <a class="code" href="structgeometry_1_1segment.html" title="Class segment: small containing two (templatized) point references.">segment&lt;const lola&gt;</a>(a, h));
        std::cout &lt;&lt; <span class="stringliteral">"in LL: "</span> &lt;&lt; 0.001 * dr &lt;&lt; std::endl;
        std::cout &lt;&lt; std::endl;


        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Compilation</span>
        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Next line does not compile because Vincenty cannot work on xy-points</span>
        <span class="comment">//std::cout &lt;&lt; "vincenty on xy:         " &lt;&lt; 0.001 * distance(a_rd, r_rd, formulae::distance::vincenty&lt;&gt;() ) &lt;&lt; " km" &lt;&lt; std::endl;</span>

        <span class="comment">// Next line does not compile because you cannot (yet) assign degree to radian directly</span>
        <span class="comment">//lolar a_rad2 = a;</span>

        <span class="comment">// Next line does not compile because you cannot assign latlong to xy</span>
        <span class="comment">// XY axy = a;</span>


        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Length</span>
        <span class="comment">// ------------------------------------------------------------------------------------------</span>
        <span class="comment">// Length calculations use distances internally. The lines below take automatically the default</span>
        <span class="comment">// formulae for distance. However, you can also specify a formula explicitly.</span>
        <span class="keyword">typedef</span> <a name="_a13"></a><a class="code" href="classgeometry_1_1linestring.html" title="A linestring (named so by OGC) is a collection (default a vector) of points.">linestring&lt;lola&gt;</a> lll;
        <span class="keyword">typedef</span> <a class="code" href="classgeometry_1_1linestring.html" title="A linestring (named so by OGC) is a collection (default a vector) of points.">linestring&lt;XY&gt;</a> lxy;

        lll line1;
        line1.push_back(a);
        line1.push_back(r);
        std::cout &lt;&lt; <span class="stringliteral">"length: "</span> &lt;&lt; <a name="a14"></a><a class="code" href="group__length.html#g21b16e5350b709e1c0eda82034b30699" title="Calculate length of a series of points, specified by an iterator pair and a strategy...">length</a>(line1.begin(), line1.end()) &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">"length using Vincenty: "</span> &lt;&lt; <a class="code" href="group__length.html#g21b16e5350b709e1c0eda82034b30699" title="Calculate length of a series of points, specified by an iterator pair and a strategy...">length</a>(line1.begin(), line1.end(), <a class="code" href="classgeometry_1_1strategy_1_1distance_1_1vincenty.html" title="Distance calculation formulae on latlong coordinates, after Vincenty, 1975.">strategy::distance::vincenty&lt;lola&gt;</a>()) &lt;&lt; std::endl;

        lxy line2;
        line2.push_back(a_rd);
        line2.push_back(r_rd);
        std::cout &lt;&lt; <span class="stringliteral">"length: "</span> &lt;&lt; <a class="code" href="group__length.html#g21b16e5350b709e1c0eda82034b30699" title="Calculate length of a series of points, specified by an iterator pair and a strategy...">length</a>(line2.begin(), line2.end()) &lt;&lt; std::endl;

        <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
<hr size="1">
<table width="100%">
<tbody>
<tr>
<td align="left"><small>
<p>October 14, 2008</p>
</small></td>
<td align="right">
<small>Copyright  1995-2008 Barend Gehrels, Geodan Holding B.V. Amsterdam, the Netherlands<br>
Copyright  2008 Bruno Lalande, Paris, France</small>
</td>
</tr>
</tbody>
</table>

<address style="text-align: right;"><small>
Documentation is generated by&nbsp;<a href="http://www.doxygen.org/index.html">Doxygen</a>
</small></address>
</body>
</html>
